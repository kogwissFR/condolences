{% if page.lang %}
  {% assign t = site.data.translations[page.lang] %}
{% else %}
  {% assign t = site.data.translations[site.default_lang] %}
{% endif %}

<section class="hero">
  <div class="container">
    <h1>{{ t.hero_title }}</h1>
    <p class="lead">
      {{ t.hero_lead }}
    </p>
  </div>
</section>

<section class="stories-section">
  <div class="container">
    <h2>{{ t.voices_title }}</h2>
    
    {% if site.data.stories and site.data.stories.size > 0 %}
      {% assign sorted_stories = site.data.stories | sort: 'publication_date' | reverse %}
      
      <div class="stories-count">
        <p>{{ sorted_stories.size }} {% if sorted_stories.size == 1 %}{{ t.voices_count_singular }}{% else %}{{ t.voices_count_plural }}{% endif %} {{ t.voices_collected }}</p>
      </div>
      
      <div class="stories-grid">
        {% for story in sorted_stories limit:20 %}
        <article class="story-card" id="story-{{ story.id }}">
          <header class="story-header">
            <h3>{{ story.title }}</h3>
            <div class="story-meta">
              <span class="author" aria-label="{{ t.author }}">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
                  <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2 2.5v.5c0 .5-.5 1-1 1H7c-.5 0-1-.5-1-1v-.5c0-1.5 1.5-2.5 3-2.5h0c1.5 0 3 1 3 2.5z"/>
                </svg>
                {{ story.author_name }}
              </span>
              {% if story.graduation_year %}
              <span class="year" aria-label="{{ t.graduation_year }}">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
                  <path d="M8 1l6 3v5c0 3-2 5-6 7-4-2-6-4-6-7V4l6-3z"/>
                </svg>
                {{ t.graduation_year }} {{ story.graduation_year }}
              </span>
              {% endif %}
              <span class="date" aria-label="{{ t.published_on }}">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true">
                  <path d="M4 1v1H2v12h12V2h-2V1h-2v1H6V1H4zm8 4H4v8h8V5z"/>
                </svg>
                {% if page.lang == 'en' %}
                  {{ story.publication_date | date: "%m/%d/%Y" }}
                {% else %}
                  {{ story.publication_date | date: "%d.%m.%Y" }}
                {% endif %}
              </span>
            </div>
          </header>
          
          <div class="story-content">
            {{ story.content | newline_to_br }}
          </div>
          
          {% if story.story_type %}
          <footer class="story-footer">
            <span class="story-type">{{ story.story_type }}</span>
          </footer>
          {% endif %}
        </article>
        {% endfor %}
      </div>
      
      {% if sorted_stories.size > 20 %}
      <div class="pagination-info">
        <p>{{ t.voices_showing }} {{ sorted_stories.size }} {{ t.voices_count_plural }}</p>
        {% if page.lang == 'en' %}
          <p class="note">More {{ t.voices_count_plural }} will be displayed in a future version.</p>
        {% else %}
          <p class="note">Weitere {{ t.voices_count_plural }} werden in einer zuk√ºnftigen Version angezeigt.</p>
        {% endif %}
      </div>
      {% endif %}
      
    {% else %}
      <div class="no-stories">
        <svg class="no-stories-icon" width="64" height="64" viewBox="0 0 64 64" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="8" y="8" width="48" height="48" rx="4"/>
          <path d="M8 20h48M20 8v48"/>
        </svg>
        <h3>{{ t.no_voices_title }}</h3>
        <p>{{ t.no_voices_text }}</p>
        <a href="{{ '/submit.html' | relative_url }}" class="btn btn-primary">
          {{ t.submit_first }}
        </a>
      </div>
    {% endif %}
  </div>
</section>

<section class="call-to-action">
  <div class="container">
    <div class="cta-content">
      <h2>{{ t.cta_title }}</h2>
      <p>
        {{ t.cta_text }}
      </p>
      <a href="{{ '/submit.html' | relative_url }}" class="btn btn-primary btn-large">
        {{ t.cta_button }}
      </a>
    </div>
  </div>
</section>
